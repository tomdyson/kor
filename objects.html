
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Extracting Objects &#8212; ðŸ˜¼ Kor 0.3.0</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Natural Language Based APIs" href="apis.html" />
    <link rel="prev" title="Prompt Examples" href="prompt_examples.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      
      <h1 class="site-logo" id="site-title">ðŸ˜¼ Kor 0.3.0</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Contents:
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="tutorial.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="prompt_examples.html">
   Prompt Examples
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Extracting Objects
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="apis.html">
   Natural Language Based APIs
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>
<a href="https://github.com/eyurtsev/kor"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="bottom"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/objects.ipynb.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#object-schema">
   Object Schema
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#hallucinations">
     Hallucinations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#improving-with-examples">
     Improving with Examples
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-s-the-actual-prompt">
     Whatâ€™s the actual prompt?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#extractions-are-grouped">
     Extractions are Grouped ðŸ˜º
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#nested-objects">
   Nested Objects ðŸ˜¹
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#grouping-ambiguity">
   Grouping Ambiguity
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#disambiguating-groups">
     Disambiguating groups
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#untyped-obects">
   Untyped Obects
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#flattened-objects">
   Flattened Objects
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Extracting Objects</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#object-schema">
   Object Schema
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#hallucinations">
     Hallucinations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#improving-with-examples">
     Improving with Examples
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-s-the-actual-prompt">
     Whatâ€™s the actual prompt?
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#extractions-are-grouped">
     Extractions are Grouped ðŸ˜º
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#nested-objects">
   Nested Objects ðŸ˜¹
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#grouping-ambiguity">
   Grouping Ambiguity
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#disambiguating-groups">
     Disambiguating groups
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#untyped-obects">
   Untyped Obects
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#flattened-objects">
   Flattened Objects
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="extracting-objects">
<h1>Extracting Objects<a class="headerlink" href="#extracting-objects" title="Permalink to this headline">#</a></h1>
<p>Kor attempts to make it easy to extract objects from text.</p>
<p>Letâ€™s see how to do this!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">kor.extraction</span> <span class="kn">import</span> <span class="n">Extractor</span>
<span class="kn">from</span> <span class="nn">kor.nodes</span> <span class="kn">import</span> <span class="n">Object</span><span class="p">,</span> <span class="n">Text</span><span class="p">,</span> <span class="n">Number</span>
<span class="kn">from</span> <span class="nn">langchain.chat_models</span> <span class="kn">import</span> <span class="n">ChatOpenAI</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">llm</span> <span class="o">=</span> <span class="n">ChatOpenAI</span><span class="p">(</span><span class="n">model_name</span><span class="o">=</span><span class="s2">&quot;gpt-3.5-turbo&quot;</span><span class="p">,</span> 
    <span class="n">temperature</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">max_tokens</span> <span class="o">=</span> <span class="mi">2000</span><span class="p">,</span>
    <span class="n">frequency_penalty</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">presence_penalty</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">top_p</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">Extractor</span><span class="p">(</span><span class="n">llm</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="object-schema">
<h2>Object Schema<a class="headerlink" href="#object-schema" title="Permalink to this headline">#</a></h2>
<p>In addition to the <code class="docutils literal notranslate"><span class="pre">Text</span></code> input, Kor also has an <code class="docutils literal notranslate"><span class="pre">Object</span></code> type which allows one to specify how to extract an object from text.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">schema</span> <span class="o">=</span> <span class="n">Object</span><span class="p">(</span>
    <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;personal_info&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Personal information about a given person.&quot;</span><span class="p">,</span>
    <span class="n">attributes</span><span class="o">=</span><span class="p">[</span>
        <span class="n">Text</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;first_name&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The first name of the person&quot;</span><span class="p">,</span>
            <span class="n">examples</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;John Smith went to the store&quot;</span><span class="p">,</span> <span class="s2">&quot;John&quot;</span><span class="p">)],</span>
        <span class="p">),</span>
        <span class="n">Text</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;last_name&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The last name of the person&quot;</span><span class="p">,</span>
            <span class="n">examples</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;John Smith went to the store&quot;</span><span class="p">,</span> <span class="s2">&quot;Smith&quot;</span><span class="p">)],</span>
        <span class="p">),</span>
        <span class="n">Number</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;age&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The age of the person in years.&quot;</span><span class="p">,</span>
            <span class="n">examples</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;23 years old&quot;</span><span class="p">,</span> <span class="s2">&quot;23&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;I turned three on sunday&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">)],</span>
        <span class="p">),</span>
    <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">prompt_generator</span><span class="o">.</span><span class="n">format_as_string</span><span class="p">(</span><span class="s2">&quot;user input goes here&quot;</span><span class="p">,</span> <span class="n">schema</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Your goal is to extract structured information from the user&#39;s input that matches the form described below. When extracting information please make sure it matches the type information exactly. Do not add any attributes that do not appear in the schema shown below.

```TypeScript

personal_info: { // Personal information about a given person.
 first_name: string[] // The first name of the person
 last_name: string[] // The last name of the person
 age: number[] // The age of the person in years.
}
```


For Union types the output must EXACTLY match one of the members of the Union type.

Please enclose the extracted information in HTML style tags with the tag name corresponding to the corresponding component ID. Use angle style brackets for the tags (&#39;&gt;&#39; and &#39;&lt;&#39;). Only output tags when you&#39;re confident about the information that was extracted from the user&#39;s query. If you can extract several pieces of relevant information from the query, then include all of them. If the type is an array, please repeat the corresponding tag name multiple times once for each relevant extraction. Do NOT output anything except for the extracted information. Only output information inside the HTML style tags. Do not include any notes or any clarifications. 

Input: John Smith went to the store
Output: &lt;personal_info&gt;&lt;first_name&gt;John&lt;/first_name&gt;&lt;/personal_info&gt;
Input: John Smith went to the store
Output: &lt;personal_info&gt;&lt;last_name&gt;Smith&lt;/last_name&gt;&lt;/personal_info&gt;
Input: 23 years old
Output: &lt;personal_info&gt;&lt;age&gt;23&lt;/age&gt;&lt;/personal_info&gt;
Input: I turned three on sunday
Output: &lt;personal_info&gt;&lt;age&gt;3&lt;/age&gt;&lt;/personal_info&gt;
Input: user input goes here
Output:
</pre></div>
</div>
</div>
</div>
<p>Please note above that examples were specified on a per attribute level.</p>
<p>When this works it allows one to more easily compose attributes; however, to improve
performance generally examples will need to be provided at the object level (as weâ€™ll do below), as it
helps the model determine how to associate attributes together.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="p">(</span><span class="s2">&quot;Eugene was 18 years old a long time ago.&quot;</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;personal_info&#39;: [{&#39;first_name&#39;: [&#39;Eugene&#39;], &#39;age&#39;: [&#39;18&#39;]}]}
</pre></div>
</div>
</div>
</div>
<p>And nothing should be extracted from the text below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="p">(</span>
    <span class="p">(</span>
        <span class="s2">&quot;My phone number is (123)-444-9999. I found my true love one on a blue sunday.&quot;</span>
        <span class="s2">&quot; Her number was (333)1232832&quot;</span>
    <span class="p">),</span>
    <span class="n">schema</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{}
</pre></div>
</div>
</div>
</div>
<section id="hallucinations">
<h3>Hallucinations<a class="headerlink" href="#hallucinations" title="Permalink to this headline">#</a></h3>
<p>Without sufficient examples, the model may incorrectly interpret the task.</p>
<p>In the example below the model is extracting phone number attribute, even though weâ€™re not trying to extract it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="p">(</span>
    <span class="p">(</span>
        <span class="s2">&quot;My name is Bob and my phone number is (123)-444-9999. I found my true love one&quot;</span>
        <span class="s2">&quot; on a blue sunday. Her number was (333)1232832&quot;</span>
    <span class="p">),</span>
    <span class="n">schema</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;personal_info&#39;: [{&#39;first_name&#39;: [&#39;Bob&#39;]},
  {&#39;phone_number&#39;: [&#39;(123)-444-9999&#39;]},
  {&#39;phone_number&#39;: [&#39;(333)1232832&#39;]}]}
</pre></div>
</div>
</div>
</div>
</section>
<section id="improving-with-examples">
<h3>Improving with Examples<a class="headerlink" href="#improving-with-examples" title="Permalink to this headline">#</a></h3>
<p>Adding more examples, especially at the object level can help improve performance.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">schema</span> <span class="o">=</span> <span class="n">Object</span><span class="p">(</span>
    <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;personal_info&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Personal information about a given person.&quot;</span><span class="p">,</span>
    <span class="n">attributes</span><span class="o">=</span><span class="p">[</span>
        <span class="n">Text</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;first_name&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The first name of the person&quot;</span><span class="p">,</span>
            <span class="c1"># examples=[(&quot;John Smith went to the store&quot;, &quot;John&quot;)],</span>
        <span class="p">),</span>
        <span class="n">Text</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;last_name&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The last name of the person&quot;</span><span class="p">,</span>
            <span class="c1"># examples=[(&quot;John Smith went to the store&quot;, &quot;Smith&quot;)],</span>
        <span class="p">),</span>
        <span class="n">Number</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;age&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The age of the person in years.&quot;</span><span class="p">,</span>
            <span class="c1"># examples=[(&quot;23 years old&quot;, &quot;23&quot;), (&quot;I turned three on sunday&quot;, &quot;3&quot;)],</span>
        <span class="p">),</span>
    <span class="p">],</span>
    <span class="n">examples</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span>
            <span class="s2">&quot;John Smith was 23 years old&quot;</span><span class="p">,</span>
            <span class="p">{</span><span class="s2">&quot;first_name&quot;</span><span class="p">:</span> <span class="s2">&quot;John&quot;</span><span class="p">,</span> <span class="s2">&quot;last_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Smith&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="s2">&quot;23&quot;</span><span class="p">},</span>
        <span class="p">)</span>
    <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="p">(</span>
    <span class="p">(</span>
        <span class="s2">&quot;My name is Bob and my phone number is (123)-444-9999. I found my true love one&quot;</span>
        <span class="s2">&quot; on a blue sunday. Her number was (333)1232832&quot;</span>
    <span class="p">),</span>
    <span class="n">schema</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;personal_info&#39;: [{&#39;first_name&#39;: [&#39;Bob&#39;]}]}
</pre></div>
</div>
</div>
</div>
</section>
<section id="what-s-the-actual-prompt">
<h3>Whatâ€™s the actual prompt?<a class="headerlink" href="#what-s-the-actual-prompt" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">prompt_generator</span><span class="o">.</span><span class="n">format_as_string</span><span class="p">(</span><span class="s2">&quot;user input goes here&quot;</span><span class="p">,</span> <span class="n">schema</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Your goal is to extract structured information from the user&#39;s input that matches the form described below. When extracting information please make sure it matches the type information exactly. Do not add any attributes that do not appear in the schema shown below.

```TypeScript

personal_info: { // Personal information about a given person.
 first_name: string[] // The first name of the person
 last_name: string[] // The last name of the person
 age: number[] // The age of the person in years.
}
```


For Union types the output must EXACTLY match one of the members of the Union type.

Please enclose the extracted information in HTML style tags with the tag name corresponding to the corresponding component ID. Use angle style brackets for the tags (&#39;&gt;&#39; and &#39;&lt;&#39;). Only output tags when you&#39;re confident about the information that was extracted from the user&#39;s query. If you can extract several pieces of relevant information from the query, then include all of them. If the type is an array, please repeat the corresponding tag name multiple times once for each relevant extraction. Do NOT output anything except for the extracted information. Only output information inside the HTML style tags. Do not include any notes or any clarifications. 

Input: John Smith was 23 years old
Output: &lt;personal_info&gt;&lt;age&gt;23&lt;/age&gt;&lt;first_name&gt;John&lt;/first_name&gt;&lt;last_name&gt;Smith&lt;/last_name&gt;&lt;/personal_info&gt;
Input: user input goes here
Output:
</pre></div>
</div>
</div>
</div>
</section>
<section id="extractions-are-grouped">
<h3>Extractions are Grouped ðŸ˜º<a class="headerlink" href="#extractions-are-grouped" title="Permalink to this headline">#</a></h3>
<p>Letâ€™s try the schema above with a longer piece of text.</p>
<p>The extraction wonâ€™t be perfect and some errors are made;
for example, Aliceâ€™s age is in days not years.
Weâ€™re missing information about <code class="docutils literal notranslate"><span class="pre">Chris</span></code>.</p>
<p>But object level attributes are properly grouped togehter!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">user_input</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;Today Alice MacDonald is turning sixty days old. She had blue eyes. &quot;</span>
    <span class="s2">&quot;Bob is turning 10 years old. His eyes were bright red. Chris Prass used his &quot;</span>
    <span class="s2">&quot;green eyes to look at Dorothy to find 15 year old eyes staring back at him. &quot;</span>
    <span class="s2">&quot;Prass was a piano teacher. Dorothy was a certified mechanic. &quot;</span>
    <span class="s2">&quot;All certified mechanics have yellow eyes.&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="p">(</span><span class="n">user_input</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;personal_info&#39;: [{&#39;age&#39;: [&#39;60&#39;],
   &#39;first_name&#39;: [&#39;Alice&#39;],
   &#39;last_name&#39;: [&#39;MacDonald&#39;]},
  {&#39;age&#39;: [&#39;10&#39;], &#39;first_name&#39;: [&#39;Bob&#39;], &#39;last_name&#39;: [{}]},
  {&#39;age&#39;: [&#39;15&#39;], &#39;first_name&#39;: [&#39;Dorothy&#39;], &#39;last_name&#39;: [{}]}]}
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="nested-objects">
<h2>Nested Objects ðŸ˜¹<a class="headerlink" href="#nested-objects" title="Permalink to this headline">#</a></h2>
<p>Letâ€™s try a more complex schema. And now break the age into 2 attributes; a number and a unit.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">schema</span> <span class="o">=</span> <span class="n">Object</span><span class="p">(</span>
    <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;personalinfo&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Collect information about a person.&quot;</span><span class="p">,</span>
    <span class="n">attributes</span><span class="o">=</span><span class="p">[</span>
        <span class="n">Text</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;profession&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The person&#39;s profession?&quot;</span><span class="p">,</span>
            <span class="n">examples</span><span class="o">=</span><span class="p">[</span>
                <span class="p">(</span><span class="s2">&quot;He was a professor&quot;</span><span class="p">,</span> <span class="s2">&quot;professor&quot;</span><span class="p">),</span>
                <span class="p">(</span><span class="s2">&quot;Bob was a lawyer and a politician&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;lawyer&quot;</span><span class="p">,</span> <span class="s2">&quot;politician&quot;</span><span class="p">]),</span>
            <span class="p">],</span>
        <span class="p">),</span>
        <span class="n">Text</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;first_name&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The person&#39;s first name&quot;</span><span class="p">,</span>
            <span class="n">examples</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;Billy was here&quot;</span><span class="p">,</span> <span class="s2">&quot;Billy&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;Bob was very tall&quot;</span><span class="p">,</span> <span class="s2">&quot;Bob&quot;</span><span class="p">)],</span>
        <span class="p">),</span>
        <span class="n">Text</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;last_name&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The person&#39;s last name&quot;</span><span class="p">,</span>
            <span class="n">examples</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;Joe Donatello was very tall&quot;</span><span class="p">,</span> <span class="s2">&quot;Donatello&quot;</span><span class="p">)],</span>
        <span class="p">),</span>
        <span class="n">Text</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;eye_color&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The person&#39;s eye color?&quot;</span><span class="p">,</span>
            <span class="n">examples</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;my eyes are green&quot;</span><span class="p">,</span> <span class="s2">&quot;green&quot;</span><span class="p">)],</span>
        <span class="p">),</span>
        <span class="n">Object</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;age&quot;</span><span class="p">,</span>
            <span class="n">attributes</span><span class="o">=</span><span class="p">[</span>
                <span class="n">Number</span><span class="p">(</span>
                    <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;number&quot;</span><span class="p">,</span>
                    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;what is the person&#39;s age?&quot;</span><span class="p">,</span>
                    <span class="n">examples</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;10 years old&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)],</span>
                <span class="p">),</span>
                <span class="n">Text</span><span class="p">(</span>
                    <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;unit&quot;</span><span class="p">,</span>
                    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;In which units is the age reported in?&quot;</span><span class="p">,</span>
                    <span class="n">examples</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;10 years old&quot;</span><span class="p">,</span> <span class="s2">&quot;years&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;22 days&quot;</span><span class="p">,</span> <span class="s2">&quot;days&quot;</span><span class="p">)],</span>
                <span class="p">),</span>
            <span class="p">],</span>
        <span class="p">),</span>
    <span class="p">],</span>
    <span class="n">examples</span><span class="o">=</span><span class="p">[],</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">user_input</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;Today Alice MacDonald is turning sixty days old. She had blue eyes. &quot;</span>
    <span class="s2">&quot;Bob is turning 10 years old. His eyes were bright red. Chris Prass used his &quot;</span>
    <span class="s2">&quot;green eyes to look at Dorothy to find 15 year old eyes staring back at him. &quot;</span>
    <span class="s2">&quot;Prass was a piano teacher. Dorothy was a certified mechanic. &quot;</span>
    <span class="s2">&quot;All certified mechanics have yellow eyes.&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="p">(</span><span class="n">user_input</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;personalinfo&#39;: [{&#39;first_name&#39;: [&#39;Alice&#39;],
   &#39;last_name&#39;: [&#39;MacDonald&#39;],
   &#39;age&#39;: [{&#39;number&#39;: [&#39;60&#39;], &#39;unit&#39;: [&#39;days&#39;]}],
   &#39;eye_color&#39;: [&#39;blue&#39;]},
  {&#39;first_name&#39;: [&#39;Bob&#39;],
   &#39;age&#39;: [{&#39;number&#39;: [&#39;10&#39;], &#39;unit&#39;: [&#39;years&#39;]}],
   &#39;eye_color&#39;: [&#39;bright red&#39;]},
  {&#39;first_name&#39;: [&#39;Chris&#39;],
   &#39;last_name&#39;: [&#39;Prass&#39;],
   &#39;profession&#39;: [&#39;piano teacher&#39;],
   &#39;eye_color&#39;: [&#39;green&#39;]},
  {&#39;first_name&#39;: [&#39;Dorothy&#39;],
   &#39;profession&#39;: [&#39;certified mechanic&#39;],
   &#39;eye_color&#39;: [&#39;yellow&#39;]}]}
</pre></div>
</div>
</div>
</div>
</section>
<section id="grouping-ambiguity">
<h2>Grouping Ambiguity<a class="headerlink" href="#grouping-ambiguity" title="Permalink to this headline">#</a></h2>
<p><em>Kor</em> interprets every type as a list of that type. (At least at the moment.)</p>
<p>As a result, grouping items correctly can be ambiguous without sufficient examples.</p>
<p>Below is an example where weâ€™re extracting where from and where to people are moving.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">FROM_ADDRESS</span> <span class="o">=</span> <span class="n">Object</span><span class="p">(</span>
    <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;from_address&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Person moved away from this address&quot;</span><span class="p">,</span>
    <span class="n">attributes</span><span class="o">=</span><span class="p">[</span>
        <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;street&quot;</span><span class="p">),</span>
        <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;city&quot;</span><span class="p">),</span>
        <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;state&quot;</span><span class="p">),</span>
        <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;zipcode&quot;</span><span class="p">),</span>
        <span class="n">Text</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s2">&quot;country&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A country in the world; e.g., France.&quot;</span><span class="p">),</span>
    <span class="p">],</span>
    <span class="n">examples</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span>
            <span class="s2">&quot;100 Main St, Boston,MA, 23232, USA&quot;</span><span class="p">,</span>
            <span class="p">{</span>
                <span class="s2">&quot;street&quot;</span><span class="p">:</span> <span class="s2">&quot;100 Marlo St&quot;</span><span class="p">,</span>
                <span class="s2">&quot;city&quot;</span><span class="p">:</span> <span class="s2">&quot;Boston&quot;</span><span class="p">,</span>
                <span class="s2">&quot;state&quot;</span><span class="p">:</span> <span class="s2">&quot;MA&quot;</span><span class="p">,</span>
                <span class="s2">&quot;zipcode&quot;</span><span class="p">:</span> <span class="s2">&quot;23232&quot;</span><span class="p">,</span>
                <span class="s2">&quot;country&quot;</span><span class="p">:</span> <span class="s2">&quot;USA&quot;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">)</span>
    <span class="p">],</span>
<span class="p">)</span>

<span class="n">TO_ADDRESS</span> <span class="o">=</span> <span class="n">FROM_ADDRESS</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
    <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;to_address&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Address to which the person is moving&quot;</span>
<span class="p">)</span>

<span class="n">schema</span> <span class="o">=</span> <span class="n">Object</span><span class="p">(</span>
    <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;information&quot;</span><span class="p">,</span>
    <span class="n">attributes</span><span class="o">=</span><span class="p">[</span>
        <span class="n">Text</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;person_name&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The full name of the person or partial name&quot;</span><span class="p">,</span>
            <span class="n">examples</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;John Smith was here&quot;</span><span class="p">,</span> <span class="s2">&quot;John Smith&quot;</span><span class="p">)],</span>
        <span class="p">),</span>
        <span class="n">FROM_ADDRESS</span><span class="p">,</span>
        <span class="n">TO_ADDRESS</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="p">(</span><span class="s2">&quot;Alice Doe and Bob Smith moved from New York to Boston&quot;</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;information&#39;: [{&#39;person_name&#39;: [&#39;Alice Doe&#39;, &#39;Bob Smith&#39;],
   &#39;from_address&#39;: [{&#39;city&#39;: [&#39;New York&#39;]}],
   &#39;to_address&#39;: [{&#39;city&#39;: [&#39;Boston&#39;]}]}]}
</pre></div>
</div>
</div>
</div>
<p><strong>Attention</strong> We extracted correct information above, but this is probably not how we wanted the information to be grouped!</p>
<section id="disambiguating-groups">
<h3>Disambiguating groups<a class="headerlink" href="#disambiguating-groups" title="Permalink to this headline">#</a></h3>
<p>At the moment, one should specify object level examples, to help the model determine how to group things correctly.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">form</span> <span class="o">=</span> <span class="n">Object</span><span class="p">(</span>
    <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;information&quot;</span><span class="p">,</span>
    <span class="n">attributes</span><span class="o">=</span><span class="p">[</span>
        <span class="n">Text</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;person_name&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The full name of the person or partial name&quot;</span><span class="p">,</span>
            <span class="n">examples</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;John Smith was here&quot;</span><span class="p">,</span> <span class="s2">&quot;John Smith&quot;</span><span class="p">)],</span>
        <span class="p">),</span>
        <span class="n">FROM_ADDRESS</span><span class="p">,</span>
        <span class="n">TO_ADDRESS</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">examples</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span>
            <span class="s2">&quot;John Smith moved to Boston from New York. Billy moved to LA.&quot;</span><span class="p">,</span>
            <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;person_name&quot;</span><span class="p">:</span> <span class="s2">&quot;John Smith&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;from_address&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;city&quot;</span><span class="p">:</span> <span class="s2">&quot;New York&quot;</span><span class="p">},</span>
                    <span class="s2">&quot;to_address&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;city&quot;</span><span class="p">:</span> <span class="s2">&quot;Boston&quot;</span><span class="p">},</span>
                <span class="p">},</span>
                <span class="p">{</span><span class="s2">&quot;person_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Billy&quot;</span><span class="p">,</span> <span class="s2">&quot;to_address&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;city&quot;</span><span class="p">:</span> <span class="s2">&quot;LA&quot;</span><span class="p">}},</span>
            <span class="p">],</span>
        <span class="p">)</span>
    <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="p">(</span><span class="s2">&quot;Alice Doe and Bob Smith moved from New York to Boston&quot;</span><span class="p">,</span> <span class="n">schema</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;information&#39;: [{&#39;person_name&#39;: [&#39;Alice Doe&#39;, &#39;Bob Smith&#39;],
   &#39;from_address&#39;: [{&#39;city&#39;: [&#39;New York&#39;]}],
   &#39;to_address&#39;: [{&#39;city&#39;: [&#39;Boston&#39;]}]}]}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="p">(</span>
    <span class="p">(</span>
        <span class="s2">&quot;Alice Doe and Bob Smith moved from New York to Boston. Andrew was 12 years&quot;</span>
        <span class="s2">&quot; old. He also moved to Boston. So did Joana and Paul. Betty did the opposite.&quot;</span>
    <span class="p">),</span>
    <span class="n">form</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;information&#39;: [{&#39;from_address&#39;: [{&#39;city&#39;: [&#39;New York&#39;]}],
   &#39;person_name&#39;: [&#39;Alice Doe&#39;],
   &#39;to_address&#39;: [{&#39;city&#39;: [&#39;Boston&#39;]}]},
  {&#39;from_address&#39;: [{&#39;city&#39;: [&#39;New York&#39;]}],
   &#39;person_name&#39;: [&#39;Bob Smith&#39;],
   &#39;to_address&#39;: [{&#39;city&#39;: [&#39;Boston&#39;]}]},
  {&#39;person_name&#39;: [&#39;Andrew&#39;]},
  {&#39;person_name&#39;: [&#39;Joana&#39;], &#39;to_address&#39;: [{&#39;city&#39;: [&#39;Boston&#39;]}]},
  {&#39;person_name&#39;: [&#39;Paul&#39;], &#39;to_address&#39;: [{&#39;city&#39;: [&#39;Boston&#39;]}]},
  {&#39;person_name&#39;: [&#39;Betty&#39;], &#39;to_address&#39;: [{&#39;city&#39;: [&#39;New York&#39;]}]}]}
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="untyped-obects">
<h2>Untyped Obects<a class="headerlink" href="#untyped-obects" title="Permalink to this headline">#</a></h2>
<p>Itâ€™s possible to provide just examples without type information.</p>
<p>Itâ€™s unclear ðŸ¤·ðŸ¤·ðŸ¤· if the quality of the results is affected significantly, especially if one adds additional examples to compensate.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">form</span> <span class="o">=</span> <span class="n">Object</span><span class="p">(</span>
    <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;information&quot;</span><span class="p">,</span>
    <span class="n">attributes</span><span class="o">=</span><span class="p">[],</span>
    <span class="n">examples</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span>
            <span class="s2">&quot;John Smith moved to Boston from New York. Billy moved to LA.&quot;</span><span class="p">,</span>
            <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;person_name&quot;</span><span class="p">:</span> <span class="s2">&quot;John Smith&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;from_address&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;city&quot;</span><span class="p">:</span> <span class="s2">&quot;New York&quot;</span><span class="p">},</span>
                    <span class="s2">&quot;to_address&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;city&quot;</span><span class="p">:</span> <span class="s2">&quot;Boston&quot;</span><span class="p">},</span>
                <span class="p">},</span>
                <span class="p">{</span><span class="s2">&quot;person_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Billy&quot;</span><span class="p">,</span> <span class="s2">&quot;to_address&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;city&quot;</span><span class="p">:</span> <span class="s2">&quot;LA&quot;</span><span class="p">}},</span>
            <span class="p">],</span>
        <span class="p">)</span>
    <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">model</span><span class="p">(</span>
    <span class="p">(</span>
        <span class="s2">&quot;Alice Doe and Bob Smith moved from New York to Boston. Andrew was 12 years&quot;</span>
        <span class="s2">&quot; old. He also moved to Boston. So did Joana and Paul. Betty did the opposite.&quot;</span>
    <span class="p">),</span>
    <span class="n">form</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>{&#39;information&#39;: [{&#39;from_address&#39;: [{&#39;city&#39;: [&#39;New York&#39;]}],
   &#39;person_name&#39;: [&#39;Alice Doe&#39;],
   &#39;to_address&#39;: [{&#39;city&#39;: [&#39;Boston&#39;]}]},
  {&#39;from_address&#39;: [{&#39;city&#39;: [&#39;New York&#39;]}],
   &#39;person_name&#39;: [&#39;Bob Smith&#39;],
   &#39;to_address&#39;: [{&#39;city&#39;: [&#39;Boston&#39;]}]},
  {&#39;person_name&#39;: [&#39;Andrew&#39;],
   &#39;age&#39;: [&#39;12&#39;],
   &#39;to_address&#39;: [{&#39;city&#39;: [&#39;Boston&#39;]}]},
  {&#39;person_name&#39;: [&#39;Joana&#39;], &#39;to_address&#39;: [{&#39;city&#39;: [&#39;Boston&#39;]}]},
  {&#39;person_name&#39;: [&#39;Paul&#39;], &#39;to_address&#39;: [{&#39;city&#39;: [&#39;Boston&#39;]}]},
  {&#39;person_name&#39;: [&#39;Betty&#39;], &#39;to_address&#39;: [{&#39;city&#39;: [&#39;New York&#39;]}]}]}
</pre></div>
</div>
</div>
</div>
</section>
<section id="flattened-objects">
<h2>Flattened Objects<a class="headerlink" href="#flattened-objects" title="Permalink to this headline">#</a></h2>
<p>This section is not ready yet.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">form</span> <span class="o">=</span> <span class="n">Object</span><span class="p">(</span>
    <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;information&quot;</span><span class="p">,</span>
    <span class="n">attributes</span><span class="o">=</span><span class="p">[</span>
        <span class="n">Text</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;person_name&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The first name of the person or partial name&quot;</span><span class="p">,</span>
            <span class="n">examples</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;John Smith was here&quot;</span><span class="p">,</span> <span class="s2">&quot;John&quot;</span><span class="p">)],</span>
        <span class="p">),</span>
        <span class="n">Text</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;last_name&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The last name of the person or partial name&quot;</span><span class="p">,</span>
            <span class="n">examples</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;John Smith was here&quot;</span><span class="p">,</span> <span class="s2">&quot;Smith&quot;</span><span class="p">)],</span>
        <span class="p">),</span>
    <span class="p">],</span>
    <span class="n">examples</span><span class="o">=</span><span class="p">[],</span>
    <span class="n">group_as_object</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># &lt;-- Please note</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="prompt_examples.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Prompt Examples</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="apis.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Natural Language Based APIs</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Eugene Yurtsev<br/>
  
      &copy; Copyright 2023, Eugene Yurtsev.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>